# DOM属性监听器 - 使用说明

## 📋 简介

DOM属性监听器是一个强大的浏览器扩展，可以实时监控网页元素的属性变化。支持监听任何HTML属性，包括文本内容变化，并提供毫秒级精度的变化日志。

## 🚀 安装方法

### 方法一：从文件夹安装（推荐）

1. **解压扩展文件**
   - 将 `DomWatcher` 文件夹保存到本地
   - 确保文件夹包含以下文件：
     ```
     DomWatcher/
     ├── manifest.json          # 扩展配置文件
     ├── content.js            # 内容脚本
     ├── sidebar-new.html      # 侧边栏界面
     ├── sidebar-new.js        # 侧边栏脚本
     ├── sidebar.css           # 样式文件
     ├── popup-simple.html     # 弹窗界面
     ├── popup-simple.js       # 弹窗脚本
     └── README.md             # 使用说明（本文件）
     ```

2. **打开浏览器扩展管理页面**

   **Chrome浏览器：**
   - 地址栏输入：`chrome://extensions/`
   - 或者：右上角菜单 → 更多工具 → 扩展程序

   **Edge浏览器：**
   - 地址栏输入：`edge://extensions/`
   - 或者：右上角菜单 → 扩展

3. **启用开发者模式**
   - 在扩展页面右上角找到 **"开发者模式"** 开关
   - 点击开启该开关

4. **加载扩展**
   - 点击出现的 **"加载已解压的扩展程序"** 按钮
   - 选择你保存的 `DomWatcher` 文件夹
   - 点击"选择文件夹"

5. **验证安装**
   - 如果一切正常，DOM监听器会出现在扩展列表中
   - 浏览器工具栏会显示扩展图标（如果未隐藏）

### 方法二：打包安装（适用于发布）

- 如果有打包的 `.crx` 文件，直接拖拽到扩展页面即可安装

## 🎯 功能特性

- ✅ **元素选择器** - 点击选择网页上的任何元素
- ✅ **属性监听** - 监听任何HTML属性变化
- ✅ **内容监听** - 监听文本内容变化（支持P标签等）
- ✅ **实时日志** - 毫秒级时间戳记录
- ✅ **搜索过滤** - 按元素、属性、时间搜索日志
- ✅ **日志导出** - 导出TXT格式日志
- ✅ **侧边栏界面** - 独立侧边栏，不影响页面浏览

## 🛠️ 使用方法

### 基本使用流程

1. **打开侧边栏**
   - 点击浏览器工具栏的DOM监听器图标
   - 在弹窗中点击"打开侧边栏"按钮
   - 侧边栏会在页面右侧打开

2. **选择要监听的元素**
   - 点击侧边栏中的"选择元素"按钮
   - 鼠标移动到网页上，元素会高亮显示
   - 点击目标元素完成选择

3. **选择监听属性**
   - 选择元素后，侧边栏会显示元素信息
   - 在下拉菜单中选择要监听的属性：
     - **标准属性**：id、class、style、href等
     - **内容属性**：textContent、innerText、innerHTML（适用于P标签等）

4. **开始监听**
   - 点击"开始监听"按钮
   - 状态会显示"正在监听"
   - 修改元素属性或内容，会实时记录变化

5. **查看和导出日志**
   - 日志会实时显示在下方
   - 使用搜索框过滤日志
   - 点击导出按钮保存日志

### 高级功能

#### 监听文本内容变化
- 对于没有传统属性的元素（如P标签、div等），可以选择：
  - `textContent` - 完整文本内容
  - `innerText` - 可见文本内容
  - `innerHTML` - HTML内容

#### 搜索日志
- 按元素标签名搜索：如 `input`、`p`、`div`
- 按属性名搜索：如 `class`、`id`、`value`
- 按时间搜索：如 `14:30:25`
- 搜索区分大小写

#### 导出日志
- 日志格式：时间 | 选择器 | 属性: "值"
- 编码：UTF-8
- 文件名：`dom-watcher-logs-时间戳.txt`

## 💡 使用场景

### Web开发调试
- 监听表单输入变化
- 调试动态内容更新
- 分析JavaScript修改效果
- 追踪样式变化

### 自动化测试
- 验证元素状态变化
- 监控页面加载过程
- 测试用户交互效果

### 学习和分析
- 研究网站行为
- 分析前端框架工作机制
- 学习DOM操作

## 🔧 常见问题

### Q: 无法选择元素怎么办？
A: 确保页面已完全加载，并且元素不是在iframe中。某些动态生成的元素可能需要等待其出现后再选择。

### Q: 监听不到变化？
A: 检查以下几点：
- 确保选择了正确的属性
- 确认元素确实发生了变化
- 检查浏览器控制台是否有错误信息

### Q: 日志被清空了？
A: 日志会在以下情况被清空：
- 页面刷新或关闭
- 点击"清空日志"按钮
- 扩展重新加载

### Q: 侧边栏无法打开？
A: 尝试以下方法：
- 刷新页面后重试
- 重新加载扩展
- 检查浏览器控制台错误信息

### Q: 选择器复杂导致找不到元素？
A: 扩展使用智能选择器生成算法，如果遇到复杂的选择器无法找到元素，可以尝试：
- 重新选择元素
- 使用更简单的选择器

## 🔒 隐私说明

- 本扩展仅在本地运行，不会收集或传输任何数据
- 监听的日志仅在本地存储，不会上传到服务器
- 不会影响网页的正常功能和性能
- 可以随时在浏览器扩展管理中禁用或卸载

## 📝 版本信息

- **当前版本**：v2.0
- **兼容性**：Chrome 88+, Edge 88+
- **更新内容**：
  - 新增侧边栏界面
  - 改进选择器算法
  - 修复P标签监听问题
  - 优化日志显示布局

## 🆘 技术支持

如果遇到问题或需要帮助，请：

1. 打开浏览器开发者工具（F12）
2. 查看Console面板是否有错误信息
3. 检查扩展是否能正常加载
4. 尝试禁用其他可能冲突的扩展

---

**💡 提示**：建议在测试环境中先熟悉各项功能，再在实际项目中使用。